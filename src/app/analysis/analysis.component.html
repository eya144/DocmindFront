<div class="container mt-4">
  <h2>🧠 Analyse du texte et Q&A</h2>
  <!-- Bouton d’upload -->
<div class="mb-3">
  <label class="form-label">📄 Ou importez un document</label>
  <input type="file"
         class="form-control"
         (change)="onFileSelected($event)"
         accept=".pdf,.docx,.txt"/>
  <button class="btn btn-sm btn-outline-primary mt-2"
          (click)="uploadAndAnalyse()"
          [disabled]="!selectedFile || loading">
    Analyser le fichier
  </button>
</div>


  <textarea [(ngModel)]="text" rows="6" class="form-control mb-3" placeholder="Collez ou tapez votre texte ici..."></textarea>

  <div class="d-flex gap-2 mb-3">
    <button class="btn btn-primary" (click)="analyzeText()" [disabled]="loading || !text">Analyser</button>
    <button class="btn btn-success" (click)="generateWordCloud()" [disabled]="!text">Nuage de mots</button>
  </div>

  <!-- Résultats de l’analyse -->
  <div *ngIf="entities.length > 0" class="mt-3">
    <h4>🔎 Entités détectées</h4>
    <ul>
      <li *ngFor="let e of entities">{{ e.text }} ({{ e.label }})</li>
    </ul>
  </div>

  <div *ngIf="keywords.length > 0">
    <h4>🏷️ Mots-clés</h4>
    <p>{{ keywords.join(', ') }}</p>
  </div>

  <!-- Q&A -->
  <div class="qa-section mt-4">
    <h4>❓ Poser une question sur le texte</h4>
    <input [(ngModel)]="question" class="form-control mb-2" placeholder="Votre question...">
    <button class="btn btn-info" (click)="askQuestion()" [disabled]="!question || !text">Poser</button>

    <div *ngIf="answer" class="mt-3 alert alert-secondary">
      <strong>Réponse : </strong> {{ answer }}
    </div>
  </div>

  <!-- WordCloud -->
  <div *ngIf="wordcloud" class="mt-4 text-center">
    <h4>🌈 Nuage de mots</h4>
    <img [src]="wordcloud" alt="WordCloud" class="img-fluid rounded shadow">
  </div>
</div>
